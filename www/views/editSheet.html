<!DOCTYPE html><html><head><meta charset="utf-8"/><meta name="format-detection" content="telephone=no"/><meta name="msapplication-tap-highlight" content="no"/><meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1"/><link rel="stylesheet" type="text/css" href="../css/framework7.css"/><link rel="stylesheet" type="text/css" href="../css/iconfont.css"/><link rel="stylesheet" type="text/css" href="../css/common.css"/><title>修改运单</title><style>.list-block .label {font-size: 12px !important;}</style></head><body><div class="statusbar-overlay"></div><div class="panel-overlay"></div><div class="views" id="fastKpPage"><div class="view view-main"><div class="pages navbar-fixed"><div data-page="updateSheet" class="page no-tabbar" id="updateSheetPage"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i></a></div><div class="center" id="title"></div><div class="right"></div></div></div><div class="page-content p10"><validator name="validation1"><form class="fast-sheet-form" novalidate><div class="list-block"><ul><li class="list-title" style="font-size: 16px;"><template v-if="isReturn">原单号:{{sheetNoShortOriginal}}</template><template v-else>No.{{sheetNoShort}}</template></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">手工单号</div><div class="item-input"><input type="text" placeholder="手工单号"v-model="sheetNoManual"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">起讫</div><div class="item-input item-input-field"><input type="text" placeholder="发货区域"v-model="fromShopName"v-validate:fromShopName="{required: {rule: true, message: '请输入发货区域' }}"readonly="readonly"><span>→</span><input type="text" placeholder="目的地"v-model="toRegionName"v-validate:toRegionName="{required: {rule: true, message: '请选择目的地' }}"readonly="readonly"@click="showSearchPage('searchToArea.html','toAreaName')"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">到货网点</div><div class="item-input"><input type="text"class="disabled"placeholder="到货网点"v-model="toShopName"readonly="readonly"></div></div></div></li></ul></div><div class="list-block"><ul><li class="list-title">发货人信息</li><li><div class="item-content"><div class="item-inner"><div class="item-title label">发货电话</div><div class="item-input item-input-field"><input type="tel" placeholder="发货电话"v-model="fromCustomerPhone"maxlength="15"id="fromCustomerPhone"v-validate:fromCustomerPhone="{required: {rule: true, message: '发货客户电话' }}"><template v-if="!showCreate"><a href="#"@click="searchFromCustomer('发货电话','phone',fromCustomerPhone,true)"class="btn"><i class="icon icon-cloud"></i></a></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">发货客户</div><div class="item-input item-input-field"><input type="text" placeholder="发货客户"v-model="fromCustomerName"maxlength="8"v-validate:fromCustomerName="{required: {rule: true, message: '发货客户名' }}"><a href="#"@click="searchFromCustomer('发货客户','name',fromCustomerName,true)"class="btn"><i class="icon icon-cloud"></i></a></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">会员卡号</div><div class="item-input item-input-field"><input type="number" placeholder="会员卡号"v-model="memberCardNo"maxlength="15"><template v-if="!showCreate"><a href="#"@click="searchMemberCardNo(memberCardNo)"class="btn"><i class="icon icon-cloud"></i></a></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">开户行</div><div class="item-input item-input-field"><select id="fromCustomerBank" name="fromCustomerBank"v-model="fromCustomerBank"><option value="">请选择开户行</option></select></div></div></div></li><template v-if="fromCustomerBank !=''"><li><div class="item-content"><div class="item-inner"><div class="item-title label">开户名</div><div class="item-input item-input-field"><input type="text" placeholder="开户名"v-model="fromCustomerHolder"v-validate:fromCustomerHolder="{required: {rule: true, message: '开户名' }}"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">银行卡号</div><div class="item-input item-input-field"><input type="number" placeholder="银行卡号"v-model="fromCustomerAccount"v-validate:fromCustomerAccount="{required: {rule: true, message: '银行卡号' }}"></div></div></div></li></template><template v-if="template.fromCustomerIdCard.show"><li><div class="item-content"><div class="item-inner"><div class="item-title label">身份证</div><div class="item-input"><input type="number" placeholder="身份证"v-model="fromCustomerIdCard"v-validate:fromCustomerIdCard="template.fromCustomerIdCard.rule"></div></div></div></li></template></ul></div><div class="list-block"><ul><li class="list-title">收货人信息</li><li><div class="item-content"><div class="item-inner"><div class="item-title label">收货电话</div><div class="item-input item-input-field"><input type="tel" placeholder="收货电话"maxlength="15"v-model="toCustomerPhone"id="toCustomerPhone"v-validate:toCustomerPhone="{required: {rule: true, message: '收货客户电话' }}"><a href="#"@click="searchToCustomer('收货电话','phone',toCustomerPhone,true)"class="btn"><i class="icon icon-cloud"></i></a></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">收货客户</div><div class="item-input item-input-field"><input type="text" placeholder="收货客户" id="toCustomerName"maxlength="8"v-model="toCustomerName"v-validate:toCustomerName="{required: {rule: true, message: '收货客户姓名' }}"><a href="#"@click="searchToCustomer('收货客户','name',toCustomerName,true)"class="btn"><i class="icon icon-cloud"></i></a></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">备用电话</div><div class="item-input item-input-field"><input type="number" placeholder="收货备用电话"maxlength="15"v-model="toCustomerPhone1"></div></div></div></li><template v-if="template.toCustomerAddress.show"><li><div class="item-content"><div class="item-inner"><div class="item-title label">收货地址</div><div class="item-input item-input-field"><input type="text" placeholder="收货地址"v-validate:toCustomerAddress="template.toCustomerAddress.rule"v-model="toCustomerAddress"></div></div></div></li></template><template v-if="template.toCustomerIdCard.show"><li><div class="item-content"><div class="item-inner"><div class="item-title label">身份证</div><div class="item-input"><input type="number" placeholder="身份证"v-model="toCustomerIdCard"v-validate:toCustomerIdCard="template.toCustomerIdCard.rule"></div></div></div></li></template><li><div class="item-content"><div class="item-inner"><div class="item-title label">送货上门</div><div class="item-input item-input-field"><input type="checkbox" v-model="deliveryMode"v-bind:true-value="2"v-bind:false-value="1"></div></div></div></li></ul></div><div class="list-block"><ul><li class="list-title">货物信息</li><li><div class="item-content"><div class="item-inner"><div class="item-title label">货物名称</div><div class="item-input item-input-field"><input type="text" placeholder="货物名称" id="goodsName"v-validate:goodsName="{required: {rule: true, message: '货物名称' }}"v-model="goodsName"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">件数</div><div class="item-input item-input-field"><input type="number" placeholder="件数"v-model="goodsAmount"v-validate:goodsAmount="{max: {rule: 10000, message: '货物件数太大了' },min: {rule: 1, message: '没有货物件数了' }}"id="goodsAmount"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">包装</div><div class="item-input item-input-field"><select v-model="goodsPackage"><option value="无">无</option><option value="纸">纸</option><option value="木">木</option><option value="编">编</option><option value="桶">桶</option><option value="托盘">托盘</option></select></div></div></div></li><template v-if="template.goodsWeight.show"><li><div class="item-content"><div class="item-inner"><div class="item-title label">重量</div><div class="item-input item-input-field"><input type="number" placeholder="重量(kg)"v-validate:goodsWeight="template.goodsWeight.rule"v-model="goodsWeight"></div></div></div></li></template><template v-if="template.goodsVolume.show"><li><div class="item-content"><div class="item-inner"><div class="item-title label">体积</div><div class="item-input item-input-field"><input type="number" placeholder="体积(m³)"v-validate:goodsVolume="template.goodsVolume.rule"v-model="goodsVolume"></div></div></div></li></template><li><div class="item-content"><div class="item-inner"><div class="item-title label">特殊需求</div><div class="item-input item-input-field"><select v-model="requirement"><option value="">请选择</option><option value="加急">加急</option><option value="贵重">贵重</option><option value="易碎">易碎</option></select></div></div></div></li></ul></div><div class="list-block"><ul><li class="list-title">特殊费用</li><li><div class="item-content"><div class="item-inner"><div class="item-title label">月结编号</div><div class="item-input "><input type="text" placeholder="月结编号/名称"maxlength="20"v-model="agreementNo"><template v-if="!showCreate"><a href="#"@click="searchAgreement(agreementNo)"class="btn"><i class="iconfont icon-search"></i></a></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">劳务费</div><div class="item-input item-input-field"><input type="number" placeholder="劳务费"v-validate:rebates="{max: {rule: 100000, message: '劳务费金额超过10w了' }}"v-model="rebates"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">垫付</div><div class="item-input item-input-field"><input type="number" placeholder="垫付"v-validate:payOutFee="{max: {rule: 100000, message: '垫付超过10w了' }}"v-model="payOutFee"><input type="checkbox" v-model="payOutFeeSettleMode"v-bind:true-value="1"v-bind:false-value="2"><span class="shsm">现返</span></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label color-red">代收货款</div><div class="item-input item-input-field"><input type="number" placeholder="代收货款"v-validate:cod="{max: {rule: 1000000, message: '代收货款金额超过100w了' }}"v-model="cod"><input type="checkbox" v-model="codFeeMode"v-bind:true-value="1"v-bind:false-value="2"><span class="shsm">寄付</span></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">声明价值</div><div class="item-input item-input-field"><input type="number" placeholder="声明价值"v-validate:declaredValue="{max: {rule: 10000000, message: '声明价值超过1000w了' }}"v-model="declaredValue"></div></div></div></li></ul></div><div class="list-block"><ul><li class="list-title">发货方费用信息</li><li><div class="item-content"><div class="item-inner"><div class="item-title label">现付金额</div><div class="item-input item-input-field"><input type="number" placeholder="现付金额"v-validate:nowPayFee="{max: {rule: 1000000, message: '现付金额超过100w了' }}"v-model="nowPayFee"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">回单付</div><div class="item-input item-input-field"><input type="number" placeholder="回单付"v-validate:backPayFee="{max: {rule: 1000000, message: '回单付金额超过100w了' }}"v-model="backPayFee"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">货款扣</div><div class="item-input item-input-field"><input type="number" placeholder="货款扣"v-validate:codPayFee="{max: {rule: 1000000, message: '货款扣金额超过100w了' }}"v-model="codPayFee"></div></div></div></li><template v-if="agreementId>0"><li><div class="item-content"><div class="item-inner"><div class="item-title label">发货月结</div><div class="item-input item-input-field"><input type="number" placeholder="发货月结金额"v-validate:fromCustomerMonthFee="{max: {rule: 1000000, message: '发货月结金额超过100w了' }}"v-model="fromCustomerMonthFee"></div></div></div></li></template><li><div class="item-content"><div class="item-inner"><div class="item-title label">接货费(发)</div><div class="item-input item-input-field"><input type="number" placeholder="接货费"v-validate:fromReceiptFee="{max: {rule: 100000, message: '接货费超过10w了' }}"v-model="fromReceiptFee"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">送货费(发)</div><div class="item-input item-input-field"><input type="number" placeholder="送货费"v-validate:fromDeliveryFee="{max: {rule: 100000, message: '送货费超过10w了' }}"v-model="fromDeliveryFee"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">回单费(发)</div><div class="item-input item-input-field"><input type="number" placeholder="回单费"v-validate:fromBackSheetFee="{max: {rule: 1000000, message: '回单费金额超过100w了' }}"v-model="fromBackSheetFee"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">保费(发)</div><div class="item-input item-input-field"><template v-if="defaultPremiumMode ==2"><input type="number" placeholder="保费"v-validate:fromPremium="{max: {rule: 100000, message: '保费金额超过10w了' }}"v-model="fromPremium"></template><template v-else><input type="number" placeholder="保费"v-model="fromPremium" disabled></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">服务费(发)</div><div class="item-input item-input-field"><input type="number" placeholder="保费"v-validate:fromOtherFee="{max: {rule: 100000, message: '服务费金额超过10w了' }}"v-model="fromOtherFee"></div></div></div></li></ul></div><div class="list-block"><ul><li class="list-title">提货方费用信息</li><li><div class="item-content"><div class="item-inner"><div class="item-title label">提付金额</div><div class="item-input item-input-field"><input type="number" placeholder="提付金额"v-validate:pickPayFee="{max: {rule: 1000000, message: '提付金额超过100w了' }}"v-model="pickPayFee"></div></div></div></li><template v-if="agreementId>0"><li><div class="item-content"><div class="item-inner"><div class="item-title label">提货月结</div><div class="item-input item-input-field"><input type="number" placeholder="提货月结金额"v-validate:toCustomerMonthFee="{max: {rule: 1000000, message: '提货月结金额超过100w了' }}"v-model="toCustomerMonthFee"></div></div></div></li></template><li><div class="item-content"><div class="item-inner"><div class="item-title label">接货费(提)</div><div class="item-input item-input-field"><input type="number" placeholder="接货费"v-validate:toReceiptFee="{max: {rule: 100000, message: '接货费超过10w了' }}"v-model="toReceiptFee"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">送货费(提)</div><div class="item-input item-input-field"><input type="number" placeholder="送货费"v-validate:toDeliveryFee="{max: {rule: 100000, message: '送货费超过10w了' }}"v-model="toDeliveryFee"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">回单费(提)</div><div class="item-input item-input-field"><input type="number" placeholder="回单费"v-validate:toBackSheetFee="{max: {rule: 1000000, message: '回单费金额超过100w了' }}"v-model="toBackSheetFee"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">保费(提)</div><div class="item-input item-input-field"><template v-if="defaultPremiumMode ==2"><input type="number" placeholder="保费"v-validate:toPremium="{max: {rule: 100000, message: '保费金额超过10w了' }}"v-model="toPremium"></template><template v-else><input type="number" placeholder="保费"v-model="fromPremium" disabled></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">服务费(提)</div><div class="item-input item-input-field"><input type="number" placeholder="保费"v-validate:toOtherFee="{max: {rule: 100000, message: '服务费金额超过10w了' }}"v-model="toOtherFee"></div></div></div></li></ul></div><div class="list-block"><ul><li class="list-title">回单信息</li><li><div class="item-content"><div class="item-inner"><div class="item-title label">回单张数</div><div class="item-input item-input-field"><input type="number" placeholder="回单张数"v-validate:backSheetAmount="{max: {rule: 100, message: '回单张数多于100张' }}"v-model="backSheetAmount"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">回单要求</div><div class="item-input item-input-field"><input type="text" placeholder="回单要求"v-model="backSheetRequirement"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">备注</div><div class="item-input item-input-field"><input type="text" placeholder="备注"v-model="remarks"></div></div></div></li></ul></div><div class="list-block list-btn"><ul><li><a href="#" class="item-link list-button btn"@click="update($validation1)">更新运单</a></li></ul></div></form></validator></div></div></div></div></div><script id="toAreaTmpl" type="text/template7">{{#toOrgAreas}}<li><a href="#" class="item-link" data-val='{{json this}}'><div class="item-content"><div class="item-inner"><div class="item-title">{{name}}({{shopName}})<span class="cityInfo">{{provinceName}}-{{cityName}}-{{areaName}}</span></div><div class="mdd hide">{{json this}}</div></div></div></a></li>{{/toOrgAreas}}</script><script id="findFromShopTmpl" type="text/template7">{{#toOrgAreas}}<li><a href="#" class="item-link" data-val='{{json this}}'><div class="item-content"><div class="item-inner"><div class="item-title">{{orgName}}{{name}}</div><div class="mdd hide">{{json this}}</div></div></div></a></li>{{/toOrgAreas}}</script><script id="findFromCustomerTmpl" type="text/template7">{{#toOrgAreas}}<li><a href="#" class="item-link" data-val='{{json this}}'><div class="item-content"><div class="item-inner"><div class="item-title">{{name}}-{{phone}}</div><div class="mdd hide">{{json this}}</div></div></div></a></li>{{/toOrgAreas}}</script><script id="findAgreementTmpl" type="text/template7">{{#agreements}}<li><a href="#" class="item-link" data-val='{{json this}}'><div class="item-content"><div class="item-inner"><div class="item-title">{{company}}-{{no}}</div><div class="mdd hide">{{json this}}</div></div></div></a></li>{{/agreements}}</script><script src="../js/libs/jquery.min.js"></script><script src="../js/libs/lodash.min.js"></script><script src="../js/libs/parse.js"></script><script src="../js/libs/framework7.js"></script><script src="../js/libs/vue.js"></script><script src="../js/libs/vue-validator.min.js"></script><script src="../js/sea.js"></script><script src="../js/main.js"></script><script>seajs.use("js/modules/views/editSheet",function(){console.log("启动应用")});</script></body></html>