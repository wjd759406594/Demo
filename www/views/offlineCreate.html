<!DOCTYPE html><html><head><meta charset="utf-8"/><meta name="format-detection" content="telephone=no"/><meta name="msapplication-tap-highlight" content="no"/><meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1"/><link rel="stylesheet" type="text/css" href="../css/framework7.css"/><link rel="stylesheet" type="text/css" href="../css/iconfont.css"/><link rel="stylesheet" type="text/css" href="../css/common.css"/><title>快速开票</title></head><body id="fastKpPage"><div class="statusbar-overlay"></div><div class="panel-overlay"></div><div class="panel panel-right panel-cover"><div class="page navbar-fixed"><div class="navbar"><div class="navbar-inner"><div class="left sliding"></div><div class="center">上传队列</div><div class="right"><template v-if="localSheets.length>0"><a href="#" class="link close-panel" @click="uploadSheet()">手动上传</a></template></div></div></div><div class="page-content"><template v-if="localSheets.length>0"><div class="list-block media-list"><ul><li v-for="(index,item) in localSheets" class="swipeout upload-state-{{item.state}}"style="border-bottom: 1px solid #e6e6e6;"><div class="swipeout-content item-content"><div class="item-media"><div class="sheet-mdd"><b>{{item.toRegionName}}</b><span>{{item.goodsName}}-{{item.goodsAmount}}</span></div></div><div class="item-inner"><div class="item-title">{{item.sheetNoShort}}</div><template v-if="item.state == 0"><div class="item-subtitle">等待上传..</div></template><template v-if="item.state == 4"><div class="item-subtitle">等待充值完成..</div></template><div class="item-subtitle">发:{{item.fromCustomerName}}({{item.fromCustomerPhone}})</div><div class="item-subtitle">收:{{item.toCustomerName}}({{item.toCustomerPhone}})</div><div class="item-subtitle">{{item.sheetCreateDate}}</div></div></div><div class="print-tools p10"><a href="#" class="btn"@click="print('WaybillBh',3,item)">补打回单</a><a href="#"class="btn btn-orange"@click="print('WaybillBh',1,item)">补打标签</a><a href="#" class="btn btn-red"@click="print('WaybillBq',2,item)">补打运单</a></div><div class="swipeout-actions-right"><a href="#" class="swipeout-close bg-orange close-panel"@click="edit(item)">修改</a></div><template v-if="item.message"><div class="p10">{{item.message}}</div></template></li></ul></div></template></div></div></div><div class="views"><div class="view view-main"><div class="pages navbar-fixed"><div data-page="createSheet" class="page no-tabbar" id="tab2"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i></a></div><div class="center">快速开票</div><div class="right"><a href="#" class="link" @click="crateNew()" style="padding: 0;"><span>新建</span></a><template v-if="localSheets.length > 0"><a href="#" data-panel="right" class="link open-panel"><i class="icon icon-bars"></i><span class="badge bg-red">{{localSheets.length}}</span></a></template></div></div></div><div class="page-content p10"><validator name="validation1"><form novalidate class="fast-sheet-form"><div class="list-block"><ul><li class="list-title" style="font-size: 16px;">No.{{sheetNoShort}}<template v-if="!showCreate"><a href="#" @click="refreshNo()" class="btn"style="margin-left: 10px;">换号</a></template></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">起讫</div><div class="item-input"><input type="text"class="disabled"placeholder="发货区域"v-model="fromShopName"v-validate:fromShopName="{required: {rule: true, message: '请输入发货网点' }}"readonly="readonly"><span>→</span><input type="text" placeholder="目的地"v-model="toRegionName"v-validate:toRegionName="{required: {rule: true, message: '请选择目的地' }}"readonly="readonly"@click="showSearchPage('searchToArea.html','toAreaName')"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">到货网点</div><div class="item-input"><input type="text"class="disabled"placeholder="到货网点"v-model="toShopName"readonly="readonly"></div></div></div></li></ul></div><div class="list-block"><ul><li class="list-title">发货人信息</li><li><div class="item-content"><div class="item-inner"><div class="item-title label" style="width: 36px;">电话</div><div class="item-input"><input type="tel" placeholder="发货电话"v-model="fromCustomerPhone"id="fromCustomerPhone"v-validate:fromCustomerPhone="{required: {rule: true, message: '发货客户电话' }}"><template v-if="!showCreate"><a href="#"@click="findPreSheet(fromCustomerPhone)"class="btn"><i class="icon icon-weichat"></i></a><a href="#"@click="searchFromCustomer('发货电话','phone',fromCustomerPhone,true)"class="btn"><i class="icon icon-cloud"></i></a><a href="#"@click="searchFromCustomer('发货电话','phone',fromCustomerPhone)"class="btn"><i class="iconfont icon-search"></i></a></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label" style="width: 36px;">姓名</div><div class="item-input"><input type="text" placeholder="发货客户"v-model="fromCustomerName"maxlength="8"v-validate:fromCustomerName="{required: {rule: true, message: '发货客户名' }}"><template v-if="!showCreate"><a href="#"@click="searchFromCustomer('发货客户','name',fromCustomerName,true)"class="btn"><i class="icon icon-cloud"></i></a><a href="#"@click="searchFromCustomer('发货客户','name',fromCustomerName)"class="btn"><i class="iconfont icon-search"></i></a></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">会员卡号</div><div class="item-input"><input type="number" placeholder="会员卡号"v-model="memberCardNo"maxlength="15"><template v-if="!showCreate"><a href="#"@click="searchMemberCardNo(memberCardNo)"class="btn"><i class="icon icon-cloud"></i></a></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">开户行</div><div class="item-input"><select id="fromCustomerBank" name="fromCustomerBank"v-model="fromCustomerBank"><option value="" selected>请选择开户行</option></select></div></div></div></li><template v-if="fromCustomerBank !=''"><li><div class="item-content"><div class="item-inner"><div class="item-title label">开户名</div><div class="item-input"><input type="text" placeholder="开户名"v-model="fromCustomerHolder"v-validate:fromCustomerHolder="{required: {rule: true, message: '开户名' }}"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">银行卡号</div><div class="item-input"><input type="number" placeholder="银行卡号"v-model="fromCustomerAccount"v-validate:fromCustomerAccount="{required: {rule: true, message: '银行卡号' }}"></div></div></div></li></template><template v-if="template.fromCustomerIdCard.show"><li><div class="item-content"><div class="item-inner"><div class="item-title label">身份证</div><div class="item-input"><input type="number" placeholder="身份证"v-model="fromCustomerIdCard"v-validate:fromCustomerIdCard="template.fromCustomerIdCard.rule"></div></div></div></li></template></ul></div><div class="list-block"><ul><li class="list-title">收货人信息</li><li><div class="item-content"><div class="item-inner"><div class="item-title label">电话</div><div class="item-input"><input type="tel" placeholder="收货电话"maxlength="15"v-model="toCustomerPhone"v-validate:toCustomerPhone="{required: {rule: true, message: '收货客户电话' }}"><template v-if="!showCreate"><a href="#"@click="searchToCustomer('收货电话','phone',toCustomerPhone,true)"class="btn"><i class="icon icon-cloud"></i></a><a href="#"@click="searchToCustomer('收货电话','phone',toCustomerPhone)"class="btn"><i class="iconfont icon-search"></i></a></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">姓名</div><div class="item-input"><input type="text" placeholder="收货客户"maxlength="8"v-model="toCustomerName"v-validate:toCustomerName="{required: {rule: true, message: '收货客户姓名' }}"><template v-if="!showCreate"><a href="#"@click="searchToCustomer('收货客户','name',toCustomerName,true)"class="btn"><i class="icon icon-cloud"></i></a><a href="#"@click="searchToCustomer('收货客户','name',toCustomerName)"class="btn"><i class="iconfont icon-search"></i></a></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">收货地址</div><div class="item-input"><template v-if="template.toCustomerAddress.show"><input type="text" placeholder="收货地址"v-validate:toCustomerAddress="template.toCustomerAddress.rule"v-model="toCustomerAddress"></template><input type="checkbox" v-model="deliveryMode"v-bind:true-value="2"v-bind:false-value="1"><span class="shsm">送货</span></div></div></div></li><template v-if="template.toCustomerIdCard.show"><li><div class="item-content"><div class="item-inner"><div class="item-title label">身份证</div><div class="item-input"><input type="number" placeholder="身份证"v-model="toCustomerIdCard"v-validate:toCustomerIdCard="template.toCustomerIdCard.rule"></div></div></div></li></template></ul></div><div class="list-block"><ul><li class="list-title">货物信息</li><li><div class="item-content"><div class="item-inner"><div class="item-title label">货物</div><div class="item-input"><input type="text" placeholder="货物名称" id="goodsName"v-validate:goodsName="{required: {rule: true, message: '货物名称' }}"v-model="goodsName"><template v-if="!showCreate"><a href="#goodsHistory" class="btn">历</a></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">件数/包装</div><div class="item-input"><input type="number" placeholder="件数"v-model="goodsAmount"v-validate:goodsAmount="{max: {rule: 10000, message: '货物件数太大了' },min: {rule: 1, message: '没有货物件数了' }}"id="goodsAmount">/<select v-model="goodsPackage"><option value="无">无</option><option value="纸">纸</option><option value="木">木</option><option value="编">编</option><option value="桶">桶</option><option value="膜">膜</option><option value="托盘">托盘</option></select></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">重量/体积</div><div class="item-input"><template v-if="template.goodsWeight.show"><input type="number" placeholder="重量(kg)"v-validate:goodsWeight="template.goodsWeight.rule"v-model="goodsWeight">/</template><template v-if="template.goodsVolume.show"><input type="number" placeholder="体积(m³)"v-validate:goodsVolume="template.goodsVolume.rule"v-model="goodsVolume"></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">特殊需求</div><div class="item-input"><select v-model="requirement"><option value="" selected>请选择</option><option value="加急">加急</option><option value="贵重">贵重</option><option value="易碎">易碎</option></select></div></div></div></li></ul></div><div class="list-block"><ul><li class="list-title">费用信息</li><li><div class="item-content"><div class="item-inner"><div class="item-title label">提付/现付</div><div class="item-input"><input type="number" placeholder="提付金额"v-validate:pickPayFee="{max: {rule: 1000000, message: '提付金额超过100w了' }}"v-model="pickPayFee">/<input type="number" placeholder="现付金额"v-validate:nowPayFee="{max: {rule: 1000000, message: '现付金额超过100w了' }}"v-model="nowPayFee"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label" style="font-size: 12px;">劳务费/垫付</div><div class="item-input"><input type="number" placeholder="劳务费"v-validate:rebates="{max: {rule: 100000, message: '劳务费金额超过10w了' }}"v-model="rebates">/<input type="number" placeholder="垫付"v-validate:payOutFee="{max: {rule: 100000, message: '垫付超过10w了' }}"v-model="payOutFee"><input style="display: none;" type="checkbox" checked="checked" v-model="payOutFeeSettleMode"v-bind:true-value="1"v-bind:false-value="2"><span style="display: none;" class="shsm">现返</span></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label" style="font-size: 12px;">回付/货款扣</div><div class="item-input"><input type="number" placeholder="回单付"v-validate:backPayFee="{max: {rule: 1000000, message: '回单付金额超过100w了' }}"v-model="backPayFee">/<input type="number" placeholder="货款扣"v-validate:codPayFee="{max: {rule: 1000000, message: '货款扣金额超过100w了' }}"v-model="codPayFee"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">保价/保费</div><div class="item-input"><input type="number" placeholder="声明价值"v-validate:declaredValue="{max: {rule: 10000000, message: '声明价值超过1000w了' }}"v-model="declaredValue"><template v-if="defaultPremiumMode ==2">/<input type="number" placeholder="保费"v-validate:premium="{max: {rule: 100000, message: '保费金额超过10w了' }}"v-model="premium"></template><template v-else><a href="#" class="btn"@click="trialPremium()">试算</a></template></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label color-red">代收货款</div><div class="item-input"><input type="number" placeholder="代收货款"v-validate:cod="{max: {rule: 1000000, message: '代收货款金额超过100w了' }}"v-model="cod"><input type="checkbox" v-model="codFeeMode"v-bind:true-value="1"v-bind:false-value="2"><span class="shsm">寄付</span></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">月结编号</div><div class="item-input"><input type="text" placeholder="月结编号/名称"maxlength="20"v-model="agreementNo"><template v-if="!showCreate"><a href="#"@click="searchAgreement(agreementNo)"class="btn"><i class="iconfont icon-search"></i></a></template></div></div></div></li><template v-if="agreementId > 0"><li><div class="item-content "><div class="item-inner"><div class="item-title label">发/收</div><div class="item-input"><input class="bg-light-blue" type="number" placeholder="发货月结金额"v-validate:fromCustomerMonthFee="{max: {rule: 1000000, message: '发货月结金额超过100w了' }}"v-model="fromCustomerMonthFee">/<input class="bg-light-orange" type="number"placeholder="收货月结金额"v-validate:toCustomerMonthFee="{max: {rule: 1000000, message: '提货月结金额超过100w了' }}"v-model="toCustomerMonthFee"></div></div></div></li></template><li><div class="item-content"><div class="item-inner"><div class="item-title label">送货/接货</div><div class="item-input"><input type="number" placeholder="送货费"v-validate:deliveryFee="{max: {rule: 100000, message: '送货费超过10w了' }}"v-model="deliveryFee">/<input type="number" placeholder="接货费"v-validate:receiptFee="{max: {rule: 100000, message: '接货费超过10w了' }}"v-model="receiptFee"></div></div></div></li></ul></div><div class="list-block"><ul><li><div class="item-content"><div class="item-inner"><div class="item-title label">回单</div><div class="item-input"><input type="number" placeholder="回单件数"v-validate:backSheetAmount="{max: {rule: 100, message: '回单张数多于100张' }}"v-model="backSheetAmount">/<input type="number" placeholder="回单费"v-validate:backSheetFee="{max: {rule: 1000000, message: '回单费金额超过100w了' }}"v-model="backSheetFee"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">回单要求</div><div class="item-input"><input type="text" placeholder="回单要求"v-model="backSheetRequirement"></div></div></div></li><li><div class="item-content"><div class="item-inner"><div class="item-title label">备注</div><div class="item-input"><input type="text" placeholder="备注"v-model="remarks"></div></div></div></li></ul></div><div class="list-block" v-show="showCreate"><ul><li class="list-title">费用合计</li><li><div class="item-content color-red" id="feeInfo"></div></li></ul></div><template v-if="!showCreate"><div class="list-block list-btn"><ul><li><a href="#" class="item-link list-button btn"@click="submit($validation1)"><template v-if="isEdit">修改运单</template><template v-else>创建运单</template></a></li></ul></div></template><template v-if="showCreate"><div class="list-block  list-btn"><ul><li><a href="#" class="item-link list-button btn"@click="printList()">一键打印</a></li><li><div class="btn-groups"><a href="#" class="item-link list-button btn"@click="print('WaybillBh',3)">打印回单</a><a href="#"class="item-link list-button btn btn-orange"@click="print('WaybillBh',1)">打印标签</a><a href="#" class="item-link list-button btn btn-red"@click="print('WaybillBq',2)">打印运单</a></div></li></ul></div></template></form></validator></div></div><div data-page="goodsHistory" class="page no-tabbar cached"><div class="navbar search"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i></a></div><div class="center">发货历史</div><div class="right"></div></div></div><div class="page-content" id="goodsHistory"><div class="content-block-title">历史记录<i class="icon icon-clear clearHistory" data-type="goodsHistory"style="float: right;"></i></div><ul class="history"></ul></div></div><div data-page="findPreSheet" class="page no-tabbar cached" id="findPreSheetPage"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i></a></div><div class="center">选择预开单</div><div class="right"></div></div></div><div class="page-content"><div class="list-block media-list list-block-search searchbar-found"><ul></ul></div></div></div></div></div></div><script id="toAreaTmpl" type="text/template7">{{#toOrgAreas}}<li><a href="#" class="item-link" data-val='{{json this}}'><div class="item-content"><div class="item-inner"><div class="item-title">{{name}}({{shopName}})<span class="cityInfo">{{provinceName}}-{{cityName}}-{{areaName}}</span></div><div class="mdd hide">{{json this}}</div></div></div></a></li>{{/toOrgAreas}}</script><script id="findFromShopTmpl" type="text/template7">{{#toOrgAreas}}<li><a href="#" class="item-link" data-val='{{json this}}'><div class="item-content"><div class="item-inner"><div class="item-title">{{orgName}}{{name}}</div><div class="mdd hide">{{json this}}</div></div></div></a></li>{{/toOrgAreas}}</script><script id="findFromCustomerTmpl" type="text/template7">{{#toOrgAreas}}<li><a href="#" class="item-link" data-val='{{json this}}'><div class="item-content"><div class="item-inner"><div class="item-title">{{name}}-{{phone}}</div><div class="mdd hide">{{json this}}</div></div></div></a></li>{{/toOrgAreas}}</script><script id="findAgreementTmpl" type="text/template7">{{#agreements}}<li><a href="#" class="item-link" data-val='{{json this}}'><div class="item-content"><div class="item-inner"><div class="item-title">{{company}}-{{no}}</div><div class="mdd hide">{{json this}}</div></div></div></a></li>{{/agreements}}</script><script id="preSheetTmpl" type="text/template7">{{#sheets}}<li><a href="#" class="item-link show-detail" data-val='{{json this}}'><div class="item-content"><div class="item-inner"><div class="item-title">{{attributes.goodsName}}({{attributes.goodsAmount}})</div><div class="item-subtitle">目的地:{{attributes.toAreaName}}</div><div class="item-subtitle">收货人:{{attributes.toCustomerName}}{{attributes.toCustomerPhone}}</div><div class="item-subtitle">时间:{{date updatedAt}}</div></div></div></a></li>{{/sheets}}</script><script src="../js/libs/jquery.min.js"></script><script src="../js/libs/lodash.min.js"></script><script src="../js/libs/parse.js"></script><script src="../js/libs/framework7.js"></script><script src="../js/libs/vue.js"></script><script src="../js/libs/vue-validator.min.js"></script><script src="../js/sea.js"></script><script src="../js/main.js"></script><script>seajs.use("js/modules/views/offlineCreate",function(){console.log("启动应用")});</script></body></html>